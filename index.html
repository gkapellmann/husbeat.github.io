<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Bootstrap core CSS -->
    <link href="./static/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./static/style.css" rel="stylesheet">

    <!-- fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="shortcut icon" href="./media/HusbeatHead.png">

    <title>Husbeat | Intro</title>

</head>

<body style="">
    <div class="site-wrapper">
        <div class="site-wrapper-inner">
            <div class="cover-container">

                <!--Bootstrap JS (Ensure Bootstrap JavaScript is loaded)-->
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

                <div id="header-placeholder"></div>
                <script>
                    fetch('/components/header.html')
                        .then(response => response.text())
                        .then(data => {
                            document.getElementById('header-placeholder').innerHTML = data;
                        })
                        .catch(error => console.error('Error loading header:', error));
                </script>

                <div class="upcoming-events" style="margin-bottom: 60px;">
                    <h2>Upcoming Events</h2>
                    <ul id="events-list"></ul>
                </div>

                <div class="grid-container">
                    <a href="/sub_concepts.html" class="grid-item">
                        <img src="./media/Intro/concepts.jpg" alt="concepts">
                        <h3>Concepts</h3>
                    </a>
                    <a href="/sub_djservices.html#services_check" class="grid-item">
                        <img src="./media/Intro/service.jpg" alt="services">
                        <h3>Services</h3>
                    </a>
                    <a href="/sub_rentals.html#studio_check" class="grid-item">
                        <img src="./media/Intro/studio.jpg" alt="studio">
                        <h3>Studio</h3>
                    </a>
                    <a href="/sub_rentals.html#rental_check" class="grid-item">
                        <img src="./media/Intro/rentals.jpg" alt="rentals">
                        <h3>Rentals</h3>
                    </a>
                    <a href="/sub_djservices.html#courses_check" class="grid-item">
                        <img src="./media/Intro/classes.jpg" alt="courses">
                        <h3>Courses</h3>
                    </a>
                    <a href="/sub_streams.html" class="grid-item">
                        <img src="./media/Intro/streaming.jpg" alt="streaming">
                        <h3>Streaming</h3>
                    </a>
                </div>

            </div>
        </div>
    </div>

    <script>

        async function loadEvents() {
            try {
                const response = await fetch('events.json'); 
                const events = await response.json();

                const list = document.getElementById('events-list');
                list.innerHTML = ""; // clear placeholder

                events.forEach(event => {
                    // Format date (DD Mon, YYYY)
                    const date = new Date(event.date);
                    const options = { day: '2-digit', month: 'short', year: 'numeric' };
                    const formattedDate = date.toLocaleDateString('en-GB', options);

                    // Create <li>
                    const li = document.createElement('li');

                    // If link exists, wrap in <a>
                    const eventLink = event.link
                        ? `<a href="${event.link}" target="_blank">${event.name}</a>`
                        : `<a>${event.name}</a>`;

                    li.innerHTML = `<strong>${formattedDate}</strong> â€“ ${eventLink} : ${event.location}`;
                    list.appendChild(li);
                });
            } catch (error) {
                console.error("Failed to load events:", error);
            }
        }

        loadEvents();
    </script>

</body >

</html >
